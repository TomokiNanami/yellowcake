---
template: SinglePost
title: テスト駆動開発(TDD) 第5章～第6章
status: Published
date: 2019-06-11T14:38:21.639Z
excerpt: TDD
categories:
  - category: Books
meta: {}
---
## 原則をあえて破るとき
> 正しい設計を正しいタイミングで行う。動かしてから正しくする。

新しい機能を試す場合はコピペを使ってまでも早く動くところまで持っていく。  
それからでもリファクタリングは遅くない。ということ？

## テスト不足に気付いたら
コピペ等で早さを求め、生まれてしまった大量の重複を無くしていく過程。  
この章では**継承**を利用して重複を排除していく。  
しかし、リファクタリングの途中であることに気付く。それは**テストコードの漏れ**だ。この漏れによって、リファクタリングの過程でミスがあってもテストが通り続けてしまう。(正確には通り抜けてしまう？)  
この場合どうすればよいのだろう。  

そういう時は、**テストコードの漏れが気づいた時点で付け足せばよい**。  
そこで書かずに進めれば、いつかその漏れが原因でリファクタリングの時に壊れてしまう。
> リファクタリングの失敗体験が生まれ、あまりリファクタリングをやらなくなってしまうかもしれない。リファクタリングが無ければ設計は次第に腐り、あなたは職を失い...

要するに壊れるのが早いか遅いかということ。

## まとめ
この章では実際に
- 継承を使ったリファクタリングをテスト駆動で進めた
- メソッドの重複を削除した
- テストコードの漏れに気付いたときに取るべき行動とその理由について知った

## 所感
「テストコードの漏れがあったときどうするか」これが個人的に気になっていたことだった。対処法を知った時は「それだけ？そもそも漏れが起こらないような対策とかないの？」と思ったが、そもそもテスト駆動開発は、「開発者が安心して綺麗なコードを書くことを目指す」手法であるので、これは理にかなっていると思った。ミスしたときのホウレンソウと同じだ…。  
また今回はリファクタリングで継承を使っていたので、クラス設計がまだまだ弱い自分にとってはこちらの方がやりやすそうだなと思った。
